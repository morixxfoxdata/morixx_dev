---
import BaseLayout from './BaseLayout.astro';
import FormattedDate from '../components/FormattedDate.astro';
import TagList from '../components/TagList.astro';
import TableOfContents from '../components/TableOfContents.astro';

interface Heading {
  depth: number;
  slug: string;
  text: string;
}

interface Props {
  title: string;
  description: string;
  pubDate: Date;
  updatedDate?: Date;
  tags: string[];
  image?: { url: string; alt: string };
  headings: Heading[];
}

const { title, description, pubDate, updatedDate, tags, image, headings } = Astro.props;
---

<BaseLayout title={title} description={description} image={image?.url}>
  <article class="prose prose-lg prose-gray max-w-none">
    <header class="mb-8 not-prose">
      <h1 class="text-3xl font-bold text-gray-900 mb-2">{title}</h1>
      <div class="text-gray-600 text-sm mb-4">
        <FormattedDate date={pubDate} />
        {updatedDate && (
          <span class="ml-2">
            (更新: <FormattedDate date={updatedDate} />)
          </span>
        )}
      </div>
      {tags.length > 0 && <TagList tags={tags} />}
    </header>
    <TableOfContents headings={headings} />
    <slot />
  </article>
</BaseLayout>
